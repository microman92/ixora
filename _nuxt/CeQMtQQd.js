import{y as F,u as C}from"./DqRRQ3fR.js";import{d as B,c as d,A as O,p as A,E as g,ag as N,D as w,C as v,$ as b,ac as i,H as s,N as f,u as o,ad as T,W as y,ah as S,J as U,a7 as V}from"./zd65DeFU.js";const W=Symbol.for("nuxt:client-only"),j=B({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(p,{slots:e,attrs:c}){const a=d(!1);return O(()=>{a.value=!0}),A(W,!0),t=>{var m;if(a.value)return(m=e.default)==null?void 0:m.call(e);const l=e.fallback||e.placeholder;if(l)return l();const h=t.fallback||t.placeholder||"",_=t.fallbackTag||t.placeholderTag||"span";return g(_,c,h)}}}),D=F("FormWork",{state:()=>({url:"https://script.google.com/macros/s/AKfycbzcPY91tcBPam0p2qB4UzGW_1AX3BjOBLviCu9OY_6wz-WfNFizrACVYZFESJxQO7x5/exec"}),actions:{async formWork(p){try{const c=await(await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:p}).then(a=>console.log("Success!",a)).catch(a=>console.error("Error!",a.message))).json();console.log(c)}catch(e){console.error("Fetch error:",e)}}}}),E=["placeholder"],P={key:0,class:"form-errors"},z=["placeholder"],q={class:"footer__form_btn"},J={__name:"submitform",props:{links:Array},setup(p){const{t:e}=C(),c=D(),a=d({name:"",tel:""}),t=d({name:"",tel:""}),l=d(!1);function h(){a.value.name?t.value.name="":t.value.name=e("name_required")}function _(){a.value.tel?a.value.tel.length<10?t.value.tel=e("phone_minimum_digits"):t.value.tel="":t.value.tel=e("phone_required")}const m=async()=>{if(h(),_(),a.value.name=a.value.tel="",!t.value.name&&!t.value.tel){const k=document.forms["submit-to-google-sheet"],n=new FormData(k);console.log(n.entries());const u=new URLSearchParams;for(const[r,x]of n.entries())u.append(r,x);try{(await fetch(c.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:u})).ok&&(l.value=!0,setTimeout(()=>{l.value=!1},2e3))}catch(r){console.error("Fetch error:",r)}}};return(k,n)=>{const u=N("mask");return w(),g("form",{class:"footer__form",onSubmit:V(m,["prevent"]),name:"submit-to-google-sheet"},[v(y,{name:"form-fade"},{default:b(()=>[i(s("span",{class:"form-succes"},f(o(e)("submission_success")),513),[[T,o(l)]])]),_:1}),s("label",null,[i(s("input",{type:"text",placeholder:o(e)("name"),"onUpdate:modelValue":n[0]||(n[0]=r=>o(a).name=r),name:"Имя"},null,8,E),[[S,o(a).name]]),v(y,{name:"form-fade"},{default:b(()=>[o(t).name?(w(),g("span",P,f(o(t).name),1)):U("",!0)]),_:1})]),s("label",null,[i(s("input",{type:"text",placeholder:o(e)("phone"),"onUpdate:modelValue":n[1]||(n[1]=r=>o(a).tel=r),name:"Телефон"},null,8,z),[[S,o(a).tel],[u,"# (###) ###-##-##"]]),v(y,{name:"form-fade"},{default:b(()=>[i(s("span",{class:"form-errors"},f(o(t).tel),513),[[T,o(t).tel]])]),_:1})]),s("button",q,f(o(e)("navBtn")),1)],32)}}};export{J as _,j as a};
